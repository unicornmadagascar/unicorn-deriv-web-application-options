<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ü¶Ñ World Unicorn ‚Äî Deriv Live Ticks</title>

<script src="https://unpkg.com/lightweight-charts@4.2.0/dist/lightweight-charts.standalone.production.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<script defer src="app.js"></script>

<style>
  body { font-family: Arial, sans-serif; margin:0; height:120vh; display:flex; flex-direction:column; background:#f8f9fa; }
  header { display:flex; justify-content:space-between; align-items:center; padding:10px 16px; background:#fff; border-bottom:1px solid #e6e6e6; }
  #symbolList { display:flex; gap:10px; overflow-x:auto; }
  .symbol-item { padding:6px 12px; border-radius:20px; background:#eee; cursor:pointer; font-weight:600; transition:0.18s; }
  .symbol-item:hover { background:#007bff; color:#fff; }
  #container { position:relative; flex:none; flex-direction: column; display:flex; }
  #chartArea { flex:none; display:flex; flex-direction:column; }
  #chartInner { flex:1; min-height:730px; background:#fff; margin:12px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.06); overflow:hidden; }

  /* gauges */
  #gauges { position:absolute; top:18px; right:18px; display:flex; gap:16px; z-index:10; }
  .gauge-container { display:flex; flex-direction:column; align-items:center; width:120px; }
  .gauge { width:110px; height:110px; border-radius:50%; background: conic-gradient(#ddd 0deg, #ddd 360deg); display:flex; align-items:center; justify-content:center; box-shadow:0 6px 18px rgba(0,0,0,0.08); }
  .gauge span { font-weight:700; color:#222; }
  .gauge-label { margin-top:6px; color:#555; font-size:13px; text-align:center; }

  /* top controls */
  #controls { padding:8px 16px; background:#fff; border-bottom:1px solid #eee; display:flex; gap:12px; align-items:center; }
  #connectBtn { background:#007bff; color:#fff; border:none; padding:8px 12px; border-radius:6px; cursor:pointer; }
  #connectBtn:hover { background:#0056b3; }

  /* Control Panel */
  #controlFormPanel {
    display: none;
    position: relative;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    padding: 20px;
    margin-top: 10px;
    width: 100%;
    box-sizing: border-box;
    transition: all 0.25s ease-in-out;
    flex-direction: column;
  }  
  #controlFormPanel div { display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; gap: 12px; }
  #controlFormPanel button { height: 42px; padding: 0 16px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.2s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.08); }
  #controlFormPanel button:hover { transform: translateY(-2px); box-shadow: 0 6px 14px rgba(0,0,0,0.12); }
  #toggleAutomation, #buyBtn, #sellBtn, #closeWinning, #closeAll { background:white; color:#4d4747; }
  #controlFormPanel label { display: flex; flex-direction: column; font-size: 13px; font-weight: 500; min-width: 80px; }
  #controlFormPanel input, #controlFormPanel select { margin-top: 6px; padding: 8px; border-radius: 6px; border: 1px solid #ccc; font-size: 14px; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05); transition: all 0.2s ease; }
  #controlFormPanel input:focus, #controlFormPanel select:focus { outline: none; border-color: #007bff; box-shadow: 0 0 0 2px rgba(0,123,255,0.2); }

  /* Toggle Show Controls */
  #controlPanelToggle { margin-top: 10px; padding: 8px 16px; border-radius: 8px; background: white; color: #4d4747; border: none; cursor: pointer; font-weight: 600; transition: all 0.2s ease; }
  #controlPanelToggle:hover { transform: translateY(-2px); }

  /* Panneau contrats */
  #contractsPanelContainer { flex: none; width: 100%; max-width: 100vw; box-sizing: border-box; display:flex; flex-direction:column; align-items:center; padding:0 12px; margin-top:12px; }
  #contractsPanelToggle { width:100%; display:flex; align-items:center; justify-content:center; margin-top:6px; padding:12px 16px; border-radius:8px; background:white; color:#4d4747; border:none; cursor:pointer; font-weight:600; font-size:13px; transition: all 0.2s ease; box-shadow:0 4px 10px rgba(0,0,0,0.08); }
  #contractsPanelToggle:hover { transform: translateY(0px); box-shadow:0 6px 14px rgba(0,0,0,0.12); }
  #contractsPanel { display:flex; opacity:0; transform: translateY(-20px); transition: all 0.4s ease; flex-direction: column; background:white; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.15); padding:20px; margin-top:5px; width:100%; box-sizing:border-box; max-height:0; overflow:hidden; }
  #contractsPanel.active { display:flex; opacity:1; transform: translateY(0); max-height:2000px; overflow-y:auto; }

  /* Tableau contrats */
  #tradeTable { width: 100%; border-collapse: collapse; margin-top:12px; }
  #tradeTable th, #tradeTable td { border:1px solid #d1e7ff; padding:8px; text-align:center; }
  #tradeTable thead { background-color:#cce5ff; font-weight:600; color:#004085; }
  #tradeTable tbody tr { background-color:#e6f2ff; transition: background 0.2s ease; cursor:pointer; }
  #tradeTable tbody tr.selected { background-color:#99ccff !important; }
  #tradeTable tbody tr:hover { background-color:#b3d7ff; }
  #tradeTable input[type="checkbox"] { transform:scale(1.2); cursor:pointer; }

  /* Bouton par ligne */
  .row-action-btn { background-color:#dc2626; color:#fff; border:none; padding:4px 10px; border-radius:6px; cursor:pointer; font-weight:600; transition: all 0.2s ease; }
  .row-action-btn:hover { transform: translateY(-1px); box-shadow:0 2px 6px rgba(0,0,0,0.2); }

  /* Delete Selected */
  .delete-container { display:flex; justify-content:flex-start; margin-top:8px; }
  #deleteSelected { background:#dc2626; color:white; border:none; padding:6px 12px; border-radius:6px; cursor:pointer; font-weight:600; box-shadow:0 2px 6px rgba(0,0,0,0.15); transition: all 0.2s ease; }
  #deleteSelected:hover { transform: translateY(-1px); box-shadow:0 4px 10px rgba(0,0,0,0.2); }

</style>
</head>
<body>
<header>
  <div id="symbolList"></div>
  <div id="controls">
    <div id="accountInfo" style="margin-right:10px; font-weight:500; color:#333;"></div>
    <button id="connectBtn">Connect</button>
  </div>
</header>

<!-- Control Panel Toggle -->
<button id="controlPanelToggle">‚öôÔ∏è Show Controls</button>
<div id="controlFormPanel">
  <div style="display:flex; gap:12px; justify-content:center; flex-wrap:wrap;">
    <button id="toggleAutomation">Launch Automation</button>
    <button id="buyBtn">BUY</button>
    <button id="sellBtn">SELL</button>
    <button id="closeWinning">Close Winning</button>
    <button id="closeAll">Close All</button> 
  </div>
</div>

<div id="container">
  <div id="chartArea">
    <div id="chartInner"></div>
  </div>
  <div id="gauges">
    <div class="gauge-container"><div id="volGauge" class="gauge"><span>0%</span></div></div>
    <div class="gauge-container"><div id="trendGauge" class="gauge"><span>0%</span></div></div>
    <div class="gauge-container"><div id="probGauge" class="gauge"><span>0%</span></div></div>
    <div class="gauge-container"><div id="plGauge" class="gauge"><span>$0.00</span></div></div>
  </div>
</div>

<!-- Panneau des contrats -->
<div id="contractsPanelContainer">
  <button id="contractsPanelToggle">üìÑ Show Contracts</button>
  <div id="contractsPanel">
    <table id="tradeTable">
      <thead>
        <tr>
          <th><input type="checkbox" id="selectAll"></th>
          <th>Time</th>
          <th>Contract ID</th>
          <th>Symbol</th>
          <th>Contract Type</th>
          <th>Stake</th>
          <th>Multiplier</th>
          <th>TP</th>
          <th>SL</th>
          <th>Profit</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="contractsBody">
        <tr>
          <td><input type="checkbox" class="rowCheckbox"></td>
          <td>11/10/2025</td>
          <td>25453367</td>
          <td>BOOM1000</td>
          <td>MULTUP</td>
          <td>5</td>
          <td>200</td>
          <td>-</td>
          <td>-</td>
          <td>+30</td>
          <td>Filled</td>
          <td><button class="row-action-btn">Delete</button></td>
        </tr>
      </tbody>
    </table>
    <div class="delete-container">
      <button id="deleteSelected">Delete Selected</button>
    </div>
  </div>
</div>

<script>
  // Toggle Controls Panel
  const controlPanelToggle = document.getElementById("controlPanelToggle");
  const controlFormPanel = document.getElementById("controlFormPanel");
  controlPanelToggle.addEventListener("click", () => {
    controlFormPanel.style.display = controlFormPanel.style.display === "flex" ? "none" : "flex";
    controlPanelToggle.textContent = controlFormPanel.style.display === "flex" ? "‚öôÔ∏è Hide Controls" : "‚öôÔ∏è Show Controls";
  });

  // Toggle Contracts Panel
  const contractsToggle = document.getElementById("contractsPanelToggle");
  const contractsPanel = document.getElementById("contractsPanel");
  contractsToggle.addEventListener("click", () => {
    contractsPanel.classList.toggle("active");
  });

  // Row selection
  const selectAll = document.getElementById("selectAll");
  const rowCheckboxes = document.querySelectorAll(".rowCheckbox");
  const deleteSelectedBtn = document.getElementById("deleteSelected");

  selectAll.addEventListener("change", () => {
    rowCheckboxes.forEach(cb => {
      cb.checked = selectAll.checked;
      cb.closest("tr").classList.toggle("selected", selectAll.checked);
    });
  });

  rowCheckboxes.forEach(cb => {
    cb.addEventListener("change", () => {
      cb.closest("tr").classList.toggle("selected", cb.checked);
    });
  });

  // Delete Selected
  deleteSelectedBtn.addEventListener("click", () => {
    rowCheckboxes.forEach(cb => {
      if(cb.checked) cb.closest("tr").remove();
    });
  });

  // Row action delete
  document.querySelectorAll(".row-action-btn").forEach(btn => {
    btn.addEventListener("click", (e) => {
      e.target.closest("tr").remove();
    });
  });
</script>
</body>
</html>
